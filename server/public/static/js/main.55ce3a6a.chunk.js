(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{22:function(e,t,a){},41:function(e,t,a){},44:function(e,t,a){e.exports=a(86)},49:function(e,t,a){},59:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(23),s=a.n(l),c=a(1),o=a(2),i=a(4),m=a(3),u=a(15),p=a(7),d=r.a.createContext(),h=function(e){return function(t){return r.a.createElement(d.Consumer,null,(function(a){return r.a.createElement(e,Object.assign({},t,{context:a}))}))}},f=(a(49),h((function(e){var t=e.context,a=e.toggleFormDisplay;return r.a.createElement("nav",{className:"NavMain"},r.a.createElement(p.c,{exact:!0,to:"/"},r.a.createElement("h3",{className:"logo"},"Scoby 2oo")),r.a.createElement("ul",null,t.isLoggedIn&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("p",{onClick:a},"Add Item")),r.a.createElement("li",null,r.a.createElement(p.c,{to:"/profile"},t.user&&t.user.firstName)),r.a.createElement("li",null,r.a.createElement("p",{onClick:function(){t.removeUser()}},"Logout"))),!t.isLoggedIn&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(p.c,{to:"/signin"},"Log in")),r.a.createElement("li",null,r.a.createElement(p.c,{to:"/signup"},"Create account")))))}))),g=a(19),E=a(14),b=Object(E.c)({accessToken:"pk.eyJ1IjoieW9vb291cGkiLCJhIjoiY2s5d3pvaG56MGF4MzNubzh0NzVrZHlrdiJ9.jH3Kyk1PQnKCisqzVZsPwQ"}),v=new Image(20,30);v.src="/media/kombucha.svg";var y=new Image(20,30);y.src="/media/kefir.svg";var N=new Image(20,30);N.src="/media/vinegar.svg";var I=new Image(20,30);I.src="/media/plant.svg";var C=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={lng:2.349014,lat:48.864716,zoom:12},e.handleClick=function(t){e.props.handleSelectItem(t)},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){var a=t.coords.latitude,n=t.coords.longitude;e.setState({lat:a,lng:n})}),(function(){console.log("An error occured geolocating user")})):console.log("Geolocation not supported")}},{key:"render",value:function(){var e=this,t=this.props.items.filter((function(e){return"Kombucha"===e.category[0]})),a=this.props.items.filter((function(e){return"Vinegar"===e.category[0]})),n=this.props.items.filter((function(e){return"Plant"===e.category[0]})),l=this.props.items.filter((function(e){return"Kefir"===e.category[0]})),s=r.a.createElement(E.b,{type:"symbol",id:"vinegars",images:["vinegar-icon",N],layout:{"icon-image":"vinegar-icon"}},a.map((function(t,a){return r.a.createElement(E.a,{key:a,onClick:function(a){return e.handleClick(t)},coordinates:t.location.coordinates})}))),c=r.a.createElement(E.b,{type:"symbol",id:"plants",images:["plant-icon",I],layout:{"icon-image":"plant-icon"}},n.map((function(t,a){return r.a.createElement(E.a,{key:a,onClick:function(a){return e.handleClick(t)},coordinates:t.location.coordinates})}))),o=r.a.createElement(E.b,{type:"symbol",id:"kombuchas",images:["kombucha-icon",v],layout:{"icon-image":"kombucha-icon"}},t.map((function(t,a){return r.a.createElement(E.a,{key:a,onClick:function(a){return e.handleClick(t)},coordinates:t.location.coordinates})}))),i=r.a.createElement(E.b,{type:"symbol",id:"kefirs",images:["kefir-icon",y],layout:{"icon-image":"kefir-icon"}},l.map((function(t,a){return r.a.createElement(E.a,{key:a,onClick:function(a){return e.handleClick(t)},coordinates:t.location.coordinates})})));return r.a.createElement(b,{style:"mapbox://styles/mapbox/light-v10",zoom:[12],containerStyle:{top:0,left:0,bottom:0,right:0,position:"absolute"},center:[this.state.lng,this.state.lat]},o,i,s,c)}}]),a}(r.a.PureComponent),S=(a(59),function(e){var t=e.item,a=e.handleClose;return console.log(t),r.a.createElement("div",{className:"Item-container"},r.a.createElement("p",{onClick:a,className:"close-link"},"Close"),r.a.createElement("div",{className:"round-image"},r.a.createElement("img",{className:"user-img",src:t.image,alt:"item"})),r.a.createElement("h2",{className:"title"},t.name),r.a.createElement("div",{className:"info"},r.a.createElement("span",null,"Quantity: ",t.quantity)," |",r.a.createElement("span",null,t.category)),r.a.createElement("p",{className:"description"},t.description),r.a.createElement("p",{className:"location"},t.location.formattedAddress),r.a.createElement("div",{className:"user-info"},r.a.createElement("div",{className:"round-image-user"},r.a.createElement("img",{src:t.id_user.profileImg,alt:"user"})),r.a.createElement("span",null,"Given away by ",t.id_user.firstName)),r.a.createElement("div",{className:"contact-information"},"Contact ",t.id_user.firstName," at ",r.a.createElement("b",null,t.contact)))}),k=a(10),j=a(12),F=a(17),O=a(24),x=a.n(O),w=(a(77),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={search:"",results:[],isLoading:!1},n.handleSearchChange=n.handleSearchChange.bind(Object(F.a)(n)),n}return Object(o.a)(a,[{key:"handleSearchChange",value:function(e){var t=this;this.setState({search:e.target.value,isLoading:!0}),clearTimeout(this.timeoutId),this.timeoutId=setTimeout((function(){t.performSearch()}),1e3)}},{key:"performSearch",value:function(){var e=this;""!==this.state.search?x.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(this.state.search,".json?access_token=").concat("pk.eyJ1IjoieW9vb291cGkiLCJhIjoiY2s5d3pvaG56MGF4MzNubzh0NzVrZHlrdiJ9.jH3Kyk1PQnKCisqzVZsPwQ")).then((function(t){e.setState({results:t.data.features,isLoading:!1})})):this.setState({results:[],isLoading:!1})}},{key:"handleItemClicked",value:function(e){this.setState({search:e.place_name,results:[]}),this.props.onSelect(e)}},{key:"render",value:function(){var e=this,t=this.state,a=t.results,n=t.isLoading;return r.a.createElement("div",{className:"AutocompletePlace"},r.a.createElement("input",{className:"input",type:"text",value:this.props.defaultValue||this.state.search,onChange:this.handleSearchChange,placeholder:"Type an address"}),r.a.createElement("ul",{className:"AutocompletePlace-results"},a.map((function(t){return r.a.createElement("li",{key:t.id,className:"AutocompletePlace-items",onClick:function(){return e.handleItemClicked(t)}},t.place_name)})),n&&r.a.createElement("li",{className:"AutocompletePlace-items"},"Loading...")))}}]),a}(n.Component)),R=(a(78),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleFile=n.handleFile.bind(Object(F.a)(n)),n}return Object(o.a)(a,[{key:"handleFile",value:function(e){e.stopPropagation();var t=URL.createObjectURL(e.target.files[0]),a=e.target.files[0];this.props.onFileSelect({tmpUrl:t,file:a})}},{key:"componentDidUpdate",value:function(e,t){this.props}},{key:"render",value:function(){var e=this.props.name;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{onClick:this.focusInput,className:"UploadWidget label",htmlFor:e},this.props.children),r.a.createElement("input",{onChange:this.handleFile,className:"UploadWidget input",id:e,type:"file",name:e}))}}]),a}(r.a.Component)),L=(a(79),function(e){var t,a=e.children,n=e.disabled,l=e.handleClick,s=Object(k.a)(e,["children","disabled","handleClick"]),c={primary:"primary",secondary:"secondary"};for(var o in s)c[o]&&(t=c[o]);return r.a.createElement("button",{disabled:n,id:"Btn",className:"Btn btn-".concat(t||""),onClick:l},a)}),A=(a(80),function(e){var t,a=e.children,n=e.icon,l=Object(k.a)(e,["children","icon"]),s={danger:"danger",info:"info",success:"success"};for(var c in l)s[c]&&(t=s[c]);return r.a.createElement("p",{className:"Message ".concat(t)},r.a.createElement("img",{className:"icon",src:"/media/".concat(n,".svg"),alt:n}),a)}),P=x.a.create({baseURL:"https://scoby-2oo.herokuapp.com",withCredentials:!0});function U(e){if(e.response)throw console.log(e.response.data.message),e.response.data;throw e}var V=function(e){return P.post("/api/auth/signup",e).then((function(e){return e.data})).catch(U)},D=function(e){return P.post("/api/auth/signin",e).then((function(e){return e.data})).catch(U)},T=function(){return P.get("/api/auth/isLoggedIn").then((function(e){return e.data})).catch(U)},K=function(){return P.get("/api/items").then((function(e){return e.data})).catch(U)},_=function(e){return P.patch("/api/users/me",e).then((function(e){return e.data})).catch(U)},z=function(e){return P.delete("/api/items/".concat(e)).then((function(e){return e.data})).catch(U)},M=function(e,t){return P.patch("/api/items/".concat(e),t).then((function(e){return e.data})).catch(U)},W=function(){return P.get("/api/users/me/items").then((function(e){return e.data})).catch(U)},q=function(e){return P.post("/api/items",e).then((function(e){return e.data})).catch(U)};function G(e,t,a){if(!t||"object"!==typeof t||t instanceof Date||t instanceof File){var n=null==t?"":t;e.append(a,n)}else Object.keys(t).forEach((function(n){G(e,t[n],a?"".concat(a,"[").concat(n,"]"):n)}))}a(41),a(81);var J=function(e){var t=e.status,a=e.message;return r.a.createElement("div",{className:"FeedBack ".concat(t)},r.a.createElement("p",null,a))},Q=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={name:"",category:"",quantity:"",address:"",description:"",httpResponse:null,error:null},e.formRef=r.a.createRef(),e.handleChange=function(t){var a="file"===t.target.type?t.target.files[0]:t.target.value,n=t.target.name;e.setState(Object(j.a)({},n,a))},e.handleSubmit=function(t){if(t.preventDefault(),e.state.category){var a=new FormData,n=e.state;n.httpResponse;G(a,Object(k.a)(n,["httpResponse"])),q(a).then((function(t){e.formRef.current.reset(),e.props.addItem(t),e.setState({httpResponse:{status:"success",message:"Item successfully added."}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),1e3)})).catch((function(t){e.setState({httpResponse:{status:"failure",message:"An error occured, try again later."}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),1e3)}))}else e.setState({error:"No category selected !"},(function(){e.timeoutId=setTimeout((function(){e.setState({error:null})}),1e3)}))},e.handleFileSelect=function(t){t.tmpUrl;var a=t.file;e.setState({image:a})},e.handlePlace=function(t){var a=t.geometry;a.formattedAddress=t.place_name,e.setState({location:a})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.httpResponse,a=e.error;return r.a.createElement("div",{className:"ItemForm-container"},r.a.createElement("form",{ref:this.formRef,className:"ItemForm",onChange:this.handleChange,onSubmit:this.handleSubmit},r.a.createElement("p",{onClick:this.props.handleClose,className:"close-link"},"X"),r.a.createElement("h2",null,"Add Item"),t&&r.a.createElement(J,{message:t.message,status:t.status}),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"name"},"Name"),r.a.createElement("input",{className:"input",type:"text",placeholder:"What are you giving away ?",name:"name"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"category"},"Category"),r.a.createElement("select",{name:"category",id:"category",defaultValue:"-1"},r.a.createElement("option",{value:"-1",disabled:!0},"Select a category"),r.a.createElement("option",{value:"Plant"},"Plant"),r.a.createElement("option",{value:"Kombucha"},"Kombucha"),r.a.createElement("option",{value:"Vinegar"},"Vinegar"),r.a.createElement("option",{value:"Kefir"},"Kefir"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"name"},"Quantity"),r.a.createElement("input",{className:"input",type:"number",name:"quantity"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"location"},"Address"),r.a.createElement(w,{onSelect:this.handlePlace})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"description"},"Description"),r.a.createElement("textarea",{name:"description",id:"description",className:"text-area",placeholder:"Tell us something about this item"})),r.a.createElement("div",{className:"form-group"},r.a.createElement(R,{onFileSelect:this.handleFileSelect,name:"image"},"Upload image")),r.a.createElement("h2",null,"Contact information"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"contact"},"How do you want to be reached?"),r.a.createElement("div",null,r.a.createElement("input",{type:"radio",name:"contact",value:this.context.user.email}),this.context.user.email),this.context.user.phoneNumber&&r.a.createElement("div",null,r.a.createElement("input",{type:"radio",name:"contact",value:this.context.user.phoneNumber}),this.context.user.phoneNumber)),r.a.createElement(A,{info:!0,icon:"info"},"Want to be contacted by phone? Add your phone number in your personal page."),a&&r.a.createElement(J,{message:a,status:"failure"}),r.a.createElement(L,{primary:!0},"Add Item")))}}]),a}(n.Component);Q.contextType=d;var H=Q,B=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={selectedItem:null,items:[]},e.addItem=function(t){e.setState({items:[].concat(Object(g.a)(e.state.items),[t])})},e.onSelectItem=function(t){e.setState({selectedItem:t})},e.handleClose=function(){e.setState({selectedItem:null})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;K().then((function(t){e.setState({items:t})}))}},{key:"render",value:function(){var e=this.context.user;return r.a.createElement(r.a.Fragment,null,e&&this.props.displayForm&&r.a.createElement(H,{handleClose:this.props.handleFormClose,addItem:this.addItem}),null!==this.state.selectedItem&&r.a.createElement(S,{item:this.state.selectedItem,handleClose:this.handleClose}),r.a.createElement(C,{items:this.state.items,handleSelectItem:this.onSelectItem}))}}]),a}(r.a.Component);B.contextType=d;var Y=B,Z=(a(82),function(e){var t=e.image,a=e.name,n=e._id,l=e.quantity,s=e.description,c=e.handleEdit,o=e.handleDelete;return r.a.createElement("div",{className:"CardItem"},r.a.createElement("div",{className:"round-image"},r.a.createElement("img",{src:t,alt:a})),r.a.createElement("div",{className:"description"},r.a.createElement("h2",null,a),r.a.createElement("h4",null,"Quantity: ",l),r.a.createElement("p",null,s),r.a.createElement("div",{className:"buttons"},r.a.createElement(L,{handleClick:function(e){return o(n)},secondary:!0},"Delete"),r.a.createElement(L,{handleClick:function(e){return c(n)},primary:!0},"Edit"))))}),X=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={httpResponse:null},e.formRef=r.a.createRef(),e.handleChange=function(t){var a="file"===t.target.type?t.target.files[0]:t.target.value,n=t.target.name;e.setState(Object(j.a)({},n,a))},e.handleSubmit=function(t){t.preventDefault();var a=new FormData,n=e.state;n.httpResponse;G(a,Object(k.a)(n,["httpResponse"])),M(e.props.item._id,a).then((function(t){e.props.onItemUpdate(t),e.setState({httpResponse:{status:"success",message:"Item successfully added."}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),1e3)})).catch((function(t){e.setState({httpResponse:{status:"failure",message:"An error occured, try again later."}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),1e3)}))},e.handleFileSelect=function(t){t.tmpUrl;var a=t.file;e.setState({image:a})},e.handlePlace=function(t){var a=t.geometry;a.formattedAddress=t.place_name,e.setState({location:a})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state.httpResponse,t=this.props.item,a=t.name,n=t.category,l=t.quantity,s=t.location,c=t.description,o=t.contact;return r.a.createElement("div",{className:"ItemForm-container"},r.a.createElement("form",{ref:this.formRef,className:"ItemForm",onChange:this.handleChange,onSubmit:this.handleSubmit},r.a.createElement("p",{onClick:this.props.handleClose,className:"close-link"},"X"),r.a.createElement("h2",null,"Edit Item"),e&&r.a.createElement(J,{message:e.message,status:e.status}),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"name"},"Name"),r.a.createElement("input",{className:"input",type:"text",placeholder:"What are you giving away ?",name:"name",defaultValue:a})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"category"},"Category"),r.a.createElement("select",{name:"category",id:"category",defaultValue:n[0]},r.a.createElement("option",{value:"Plant"},"Plant"),r.a.createElement("option",{value:"Kombucha"},"Kombucha"),r.a.createElement("option",{value:"Vinegar"},"Vinegar"),r.a.createElement("option",{value:"Kefir"},"Kefir"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"name"},"Quantity"),r.a.createElement("input",{className:"input",type:"number",name:"quantity",defaultValue:l})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"location"},"Address"),r.a.createElement(w,{defaultValue:s.formattedAddress,onSelect:this.handlePlace})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"description"},"Description"),r.a.createElement("textarea",{name:"description",id:"description",className:"text-area",placeholder:"Tell us something about this item",defaultValue:c})),r.a.createElement("div",{className:"form-group"},r.a.createElement(R,{onFileSelect:this.handleFileSelect,name:"image"},"Upload image")),r.a.createElement("h2",null,"Contact information"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"contact"},"How do you want to be reached?"),r.a.createElement("div",null,r.a.createElement("input",{type:"radio",name:"contact",defaultChecked:o===this.context.user.email,value:this.context.user.email}),this.context.user.email),this.context.user.phoneNumber&&r.a.createElement("div",null,r.a.createElement("input",{type:"radio",name:"contact",defaultChecked:o===this.context.user.phoneNumber,value:this.context.user.phoneNumber}),this.context.user.phoneNumber)),r.a.createElement(A,{info:!0,icon:"info"},"Want to be contacted by phone? Add your phone number in your personal page."),r.a.createElement(L,{primary:!0},"Edit Item")))}}]),a}(n.Component);X.contextType=d;var $=X,ee=(a(83),a(22),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={phoneNumber:"",httpResponse:null,selectedItem:null,userItems:[]},e.submitPhoneNumber=function(t){t.preventDefault();var a=e.state,n=(a.httpResponse,a.userItems,a.selectedItem,Object(k.a)(a,["httpResponse","userItems","selectedItem"]));_(n).then((function(t){e.context.setUser(t),e.setState({httpResponse:{status:"success",message:"Phone number added."}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),1e3)})).catch((function(t){e.setState({httpResponse:{status:"failure",message:"An error occured, try again later"}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),1e3)}))},e.handlePhoneNumber=function(t){e.setState({phoneNumber:t.target.value})},e.deleteItem=function(t){z(t).then((function(){var a=Object(g.a)(e.state.userItems).filter((function(e){return e._id!==t}));e.setState({userItems:a})}))},e.onItemSelect=function(t){var a=e.state.userItems.find((function(e){return e._id===t}));e.setState({selectedItem:a})},e.onEditFormClose=function(){e.setState({selectedItem:null})},e.handleItemUpdate=function(t){var a=Object(g.a)(e.state.userItems).map((function(e){return e._id===t._id?t:e}));e.setState({userItems:a})},e.addItem=function(t){e.setState({userItems:[].concat(Object(g.a)(e.state.userItems),[t])})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;W().then((function(t){e.setState({userItems:t})}))}},{key:"render",value:function(){var e=this,t=this.context.user,a=this.state,n=a.httpResponse,l=a.userItems,s=a.selectedItem;return t?r.a.createElement("section",{className:"Profile"},s&&r.a.createElement($,{item:s,handleClose:this.onEditFormClose,onItemUpdate:this.handleItemUpdate}),t&&this.props.displayForm&&r.a.createElement(H,{handleClose:this.props.handleFormClose,addItem:this.addItem}),r.a.createElement("div",{className:"user-image round-image"},r.a.createElement("img",{src:t.profileImg,alt:t.firstName})),r.a.createElement("div",{className:"user-presentation"},r.a.createElement("h2",{className:"title"},t.firstName," ",t.lastName),r.a.createElement(p.b,{className:"link",to:"/profile/settings"},"Edit profile")),r.a.createElement("div",{className:"user-contact"},r.a.createElement("h4",null,"Add a phone number"),n&&r.a.createElement(J,{message:n.message,status:n.status}),r.a.createElement("form",{className:"form",onChange:this.handlePhoneNumber,onSubmit:this.submitPhoneNumber},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"phoneNumber"},"Phone number"),r.a.createElement("input",{className:"input",id:"phoneNumber",type:"text",name:"phoneNumber",defaultValue:this.context.user.phoneNumber||"",placeholder:"Add phone number"})),r.a.createElement(L,{primary:!0},"Add phone number"))),!l.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:""},r.a.createElement("img",{src:"/media/personal-page-empty-state.svg",alt:""})),r.a.createElement("p",null,"You don't have any items :(")),!!l.length&&r.a.createElement("div",{className:"CardItems"},r.a.createElement("h3",null,"Your items"),l.map((function(t,a){return r.a.createElement(Z,Object.assign({key:a},t,{handleDelete:e.deleteItem,handleEdit:e.onItemSelect}))})))):null}}]),a}(n.Component));ee.contextType=d;var te=ee,ae=function(e){return r.a.createElement("div",null)},ne=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={},e.handleChange=function(t){var a="file"===t.target.type?t.target.files[0]:t.target.value,n=t.target.name;e.setState(Object(j.a)({},n,a))},e.handleSubmit=function(t){t.preventDefault(),V(e.state).then((function(t){e.context.setUser(t)})).catch((function(e){console.log(e)}))},e}return Object(o.a)(a,[{key:"render",value:function(){return this.context.isLoggedIn?r.a.createElement(u.a,{to:"/"}):r.a.createElement("section",{className:"form-section"},r.a.createElement("header",{className:"header"},r.a.createElement("h1",null,"Hello",r.a.createElement("span",{role:"img","aria-label":"hand"},"\ud83d\udc4b"))),r.a.createElement("form",{autoComplete:"off",className:"form",onChange:this.handleChange,onSubmit:this.handleSubmit},r.a.createElement("h2",null,"Create account"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"firstName"},"First name"),r.a.createElement("input",{className:"input",id:"firstName",type:"text",name:"firstName"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"lastName"},"Last Name"),r.a.createElement("input",{className:"input",id:"lastName",type:"text",name:"lastName"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"email"},"Email"),r.a.createElement("input",{className:"input",id:"email",type:"email",name:"email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"password"},"Password"),r.a.createElement("input",{className:"input",id:"password",type:"password",name:"password"})),r.a.createElement("button",{className:"btn-submit"},"Let's go!")),r.a.createElement("div",{className:"form-section link"},r.a.createElement("p",null,"Already have an account? "),r.a.createElement(p.b,{to:"/signin"},"Log in")))}}]),a}(n.Component);ne.contextType=d;var re=ne,le=function(e){return r.a.createElement(re,null)},se=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={email:"tuts@gmail.com",password:"123"},e.handleChange=function(t){var a="file"===t.target.type?t.target.files[0]:t.target.value,n=t.target.name;e.setState(Object(j.a)({},n,a))},e.handleSubmit=function(t){t.preventDefault(),D(e.state).then((function(t){e.context.setUser(t)})).catch((function(e){console.log(e)}))},e}return Object(o.a)(a,[{key:"render",value:function(){return this.context.isLoggedIn?r.a.createElement(u.a,{to:"/"}):r.a.createElement("section",{className:"form-section"},r.a.createElement("header",{className:"header"},r.a.createElement("h1",null,"Welcome back",r.a.createElement("span",{role:"img","aria-label":"hand"},"\ud83d\udc4b"))),r.a.createElement("form",{autoComplete:"off",className:"form",onChange:this.handleChange,onSubmit:this.handleSubmit},r.a.createElement("h2",null,"Login"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"email"},"Email"),r.a.createElement("input",{className:"input",id:"email",type:"email",name:"email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"password"},"Password"),r.a.createElement("input",{className:"input",id:"password",type:"password",name:"password"})),r.a.createElement("button",{className:"btn-submit"},"Let's go!")),r.a.createElement("div",{className:"form-section link"},r.a.createElement("p",null,"Already have an account? "),r.a.createElement(p.b,{to:"/signup"},"Register")))}}]),a}(n.Component);se.contextType=d;var ce=se,oe=function(e){return r.a.createElement(ce,null)};var ie=function(e){var t=e.component,a=e.render,n=Object(k.a)(e,["component","render"]);return r.a.createElement(d.Consumer,null,(function(e){return e.isLoading?r.a.createElement("div",null,"Loading ..."):e.isLoggedIn?r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(u.b,Object.assign({},n,{render:a})),!a&&r.a.createElement(u.b,Object.assign({},n,{render:function(e){return r.a.createElement(t,e)}}))):r.a.createElement(u.a,{to:"/signin"})}))},me=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={tmpUrl:"",httpResponse:null},e.handleChange=function(t){var a=t.target.name,n="file"===t.target.type?t.target.files[0]:"checkbox"===t.target.type?t.target.checked:t.target.value;e.setState(Object(j.a)({},a,n))},e.isValidInput=function(t){return""!==e.state[t]},e.checkError=function(){for(var t in e.state)if("tmpUrl"!==t&&"httpResponse"!==t&&""===e.state[t])return!0;return!1},e.handleSubmit=function(t){t.preventDefault();var a=new FormData;for(var n in e.state)"tmpUrl"!==n&&"httpResponse"!==n&&a.append(n,e.state[n]);_(a).then((function(t){e.context.setUser(t),e.setState({httpResponse:{status:"success",message:"Profile successfully updated."}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),2e3)})).catch((function(t){e.setState({httpResponse:{status:"failure",message:"Something bad happened while updating your profile, try again later"}}),e.timeoutId=setTimeout((function(){e.setState({httpResponse:null})}),2e3)}))},e.handleFileSelect=function(t){var a=t.tmpUrl,n=t.file;e.setState({tmpUrl:a,profileImg:n})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.context.user,t=this.state.httpResponse;return e?r.a.createElement("section",{className:"form-section"},r.a.createElement("form",{autoComplete:"off",className:"form",onChange:this.handleChange,onSubmit:this.handleSubmit},r.a.createElement("h1",{className:"header"},"Edit profile"),r.a.createElement("div",{className:"round-image user-image"},r.a.createElement("img",{src:this.state.tmpUrl||e.profileImg,alt:e.firstName})),r.a.createElement("div",{className:"form-group"},r.a.createElement(R,{onFileSelect:this.handleFileSelect,name:"profileImg"},"Change profile image")),t&&r.a.createElement(J,{message:t.message,status:t.status}),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"firstName"},"First name"),r.a.createElement("input",{className:"input",id:"firstName",type:"text",name:"firstName",defaultValue:e.firstName}),!this.isValidInput("firstName")&&r.a.createElement("p",{className:"input-error"},"Invalid input")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"lastName"},"Last Name"),r.a.createElement("input",{className:"input",id:"lastName",type:"text",name:"lastName",defaultValue:e.lastName}),!this.isValidInput("lastName")&&r.a.createElement("p",{className:"input-error"},"Invalid input")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"email"},"Email"),r.a.createElement("input",{className:"input",id:"email",type:"email",name:"email",defaultValue:e.email,disabled:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"phoneNumber"},"Phone number"),r.a.createElement("input",{className:"input",id:"phoneNumber",type:"text",name:"phoneNumber",defaultValue:e.phoneNumber}),!this.isValidInput("phoneNumber")&&r.a.createElement("p",{className:"input-error"},"Invalid input")),r.a.createElement(L,{primary:!0,disabled:this.checkError()},"Save"))):r.a.createElement("div",null,"Loading...")}}]),a}(n.Component);me.contextType=d;var ue=me,pe=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={displayForm:!1},e.toggleFormDisplay=function(t){e.setState({displayForm:!e.state.displayForm})},e.handleClose=function(t){e.setState({displayForm:!1})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(f,{toggleFormDisplay:this.toggleFormDisplay}),r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/",render:function(t){return r.a.createElement(Y,Object.assign({},t,{displayForm:e.state.displayForm,handleFormClose:e.handleClose,items:e.state.items,onSelectItem:e.onSelectItem}))}}),r.a.createElement(ie,{exact:!0,path:"/profile",render:function(t){return r.a.createElement(te,Object.assign({},t,{displayForm:e.state.displayForm,handleFormClose:e.handleClose}))}}),r.a.createElement(ie,{exact:!0,path:"/profile/settings",component:ue}),r.a.createElement(u.b,{exact:!0,path:"/about",component:ae}),r.a.createElement(u.b,{exact:!0,path:"/signup",component:le}),r.a.createElement(u.b,{exact:!0,path:"/signin",component:oe})))}}]),a}(r.a.Component),de=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={user:null,isLoggedIn:!1,isLoading:!0},e.removeUser=function(){e.setState({user:null,isLoggedIn:!1})},e.setUser=function(t){e.setState({user:t,isLoggedIn:!0})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;T().then((function(t){e.setState({user:t,isLoggedIn:!0,isLoading:!1})})).catch((function(t){console.log(t),e.setState({isLoggedIn:!1})}))}},{key:"render",value:function(){var e={user:this.state.user,isLoggedIn:this.state.isLoggedIn,isLoading:this.state.isLoading,removeUser:this.removeUser,setUser:this.setUser};return r.a.createElement(d.Provider,{value:e},this.props.children)}}]),a}(r.a.Component);a(84),a(85);s.a.render(r.a.createElement(p.a,null,r.a.createElement(de,null,r.a.createElement(pe,null))),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.55ce3a6a.chunk.js.map